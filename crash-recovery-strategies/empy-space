/*
CUANDO EL DISCO SE LLENA, LAS BD'S PUEDEN TERMINAR CON PROBLEMAS
ESTOS SON LOS PASOS PARA RECUPERAR UNA BD QUE HA SUFRIDO UN CRASH
*/
ALTER DATABASE <DB> SET  SINGLE_USER WITH NO_WAIT
ALTER DATABASE <DB> SET EMERGENCY;
DBCC checkdb (<DB>, REPAIR_ALLOW_DATA_LOSS)
ALTER DATABASE <DB> SET online;
ALTER DATABASE <DB> SET  Multi_USER WITH NO_WAIT
 
//PARA VALIDAR EL ESTATUS DE RECUPERACION (EN %)
 
SELECT session_id,start_time,command,percent_complete FROM sys.dm_exec_requests WHERE session_id = 160
  
160=> spid proceos asociado
 
/// en modo RESTORING
 
RESTORE DATABASE <DB> WITH RECOVERY
